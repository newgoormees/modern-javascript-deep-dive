# 40장 이벤트

### 40.1 이벤트 드리븐 프로그래밍

- 브라우저는 클릭, 키보드 입력, 마우스 이동 등 처리해야 할 특정 사건이 발생하면 특정한 타입의 이벤트를 발생시킨다.
- **이벤트 핸들러**: 이벤트가 발생했을 때 호출될 함수
- **이벤트 등록**: 이벤트가 발생했을 때 브라우저에게 이벤트 핸들러의 호출을 위임하는 것

→ 이벤트가 언제 발생할지 알 수 없으므로 브라우저에게 호출을 위임하는 것임

- **이벤트 드리븐 프로그래밍**: 프로그램의 흐름을 이벤트 중심으로 제어하는 프로그래밍 방식

### 40.2 이벤트 타입

- **이벤트 타입**: 이벤트의 종류를 나타내는 문자열. 약 200여 가지가 있다.
- 마우스 이벤트 예시: click, dbclick, mousedown, mouseup, mousemove, mouseenter, mouseover…
- 키보드 이벤트 예시: keydown, keypress, keyup
- 포커스 이벤트 예시: focus, blur, focusin, focusout
- 폼 이벤트 예시: submit, reset
- 값 변경 이벤트: input, change, readystatechange
- DOM 뮤테이션 이벤트: DOMContentLoaded
- 뷰 이벤트: resize, scroll
- 리소스 이벤트: load, unload, abort, error

### 40.3 이벤트 핸들러 등록

**이벤트 핸들러 어트리뷰트 방식**

- 이벤트 핸들러 어트리뷰트의 이름: on 접두사 + 이벤트의 종류
- 이벤트 핸들러 어트리뷰트 값은 사실 암묵적으로 생성될 이벤트 핸들러의 함수 몸체를 의미한다.
    
    ```jsx
    onclick="sayHi('Lee')"
    
    function onclick(event) {
    	sayHi('Lee');
    }
    ```
    
- 이벤트 핸들러 어트리뷰트에 여러 개의 문장을 할당할 수 있지만, HTML과 자바스크립트는 관심사가 다르므로 혼재하는 것보다 분리하는 것이 좋다. → CBD(Component Based Development) 방식의 프레임워크/라이브러리에서는 이벤트 핸들러 어트리뷰트 방식으로 처리한다. HTML, CSS, JS 모두 뷰를 구성하기 위한 요소로 취급하기 때문.

**이벤트 핸들러 프로퍼티 방식**

- window 객체와 Document, HTMLElement 타입의 DOM 노드 객체는 이벤트에 대응하는 이벤트 핸들러 프로퍼티를 가지고 있다.
- 이벤트 핸들러를 등록하기 위해서는 이벤트 타깃, 이벤트 타입, 이벤트 핸들러를 지정해야 한다.
    
    ```jsx
    $button.onclick = function () {
    	console.log('button click');
    };
    ```
    
- 이벤트 핸들러 어트리뷰트 방식과 달리 HTML과 자바스크립트가 뒤섞이는 문제를 해결할 수 있으나, 하나의 이벤트 핸들러만 바인딩할 수 있다는 단점이 있다.

**addEventListener 메서드 방식**

- DOM Level 2에서 도입된 방식
    
    ```jsx
    EventTarget.addEventListener('eventType',functionName [, useCapture]);
    ```
    

### 40.4 이벤트 핸들러 제거

- addEventListener 메서드로 등록한 이벤트 핸들러를 제거하려면 EventTarget.prototype.removeEventListener 메서드를 사용

### 40.5 이벤트 객체

- 생성된 이벤트 객체는 이벤트 핸들러의 첫 번째 인수로 전달된다.
- 이벤트 객체를 전달받으려면 이벤트 핸들러를 정의할 때 이벤트 객체를 전달받을 매개변수를 명시적으로 선언해야 한다.
- 이벤트 객체는 공통 프로퍼티가 존재한다.

### 40.6 이벤트 전파

- 이벤트 전파: DOM 트리 상에 존재하는 DOM 요소 노드에서 발생한 이벤트는 DOM 트리를 통해 전파된다.
- 요소 클릭 시 이벤트가 발생한다. 이때 생성되는 이벤트 객체는 이벤트를 발생시킨 DOM 요소인 이벤트 타깃을 중심으로 DOM 트리를 통해 전파된다.
- 이벤트 객체가 전파되는 방향에 따라 3단계로 구분할 수 있다
    - 캡처링 단계
    - 타깃 단계
    - 버블링 단계
- 이벤트 핸들러 어트리뷰트/프로퍼티 방식으로 등록한 이벤트 핸들러는 타깃 단계와 버블링 단계의 이벤트만 캐치할 수 있다.
- addEventListener 메서드 방식으로 등록한 이벤트 핸들러는 타깃 단계, 버블링 단계, 캡처링 단계의 이벤트를 선별적으로 캐치할 수 있다.

### 40.7 이벤트 위임

- 이벤트 위임: 여러 개의 하위 DOM 요소에 각각 이벤트 핸들러를 등록하는 대신, 하나의 상위 DOM 요소에 이벤트 핸들러를 등록하는 방법

### 40.8 DOM 요소의 기본 동작 조작

- `preventDefault` 메서드를 사용하면 DOM 요소의 기본 동작을 중단시킬 수 있다.
- `stopPropagation` 메서드를 사용하면 이벤트 전파를 중지시킨다.

### 40.9 이벤트 핸들러 내부의 this

- 이벤트 핸들러 어트리뷰트 방식에서 핸들러 함수 내부의 this는 전역 객체 window를 가리킨다.
- 이벤트 핸들러 프로퍼티 방식과 addEventListener 메서드 방식에서 함수 내부의 this는 이벤트를 바인딩한 DOM 요소를 가리킨다.

### 40.10 이벤트 핸들러에 인수 전달

- 이벤트 핸들러 프로퍼티 방식과 addEventListener 메서드 방식의 경우, 이벤트 핸들러를 브라우저가 호출하기 때문에 함수 호출문이 아닌 함수 자체를 등록한다. → 인수를 전달할 수 없다. 하지만 이벤트 핸들러 내부에서 함수를 호출하면서 인수를 전달할 수 있다.

### 40.11 커스텀 이벤트

- 이벤트 객체는 이벤트 생성자 함수로 생성할 수 있다.
- 개발자의 의도로 생성된 이벤트를 커스텀 이벤트라 한다.
- 생성된 커스텀 이벤트는 dispatchEvent 메서드로 디스패치 할 수 있다.