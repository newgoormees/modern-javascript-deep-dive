# 23장 컨텍스트

### 23.1 소스코드의 타입

- 4가지로 분류됨

<img src="./23장 실행 컨텍스트/Untitled.png" >

4가지로 분류하는 이유

- 타입에 따라 실행 컨텍스트를 생성하는 과정, 관리 내용이 다르다.

---

1. 전역 코드
    - 전역 코드가 평가되면 전역 실행 컨텍스트 생성
2. 함수 코드
    - 함수 코드가 평가되면 함수 실행 컨텍스트 생성
3. eval 코드
    - eval 코드가 평가되면 eval 실행 컨텍스트 생성
4. 모듈 코드
    - 모듈 코드가 평가되면 모듈 실행 컨텍스트 생성

### 23.2 소스코드의 평가와 실행

- 자바스크립트 엔진은 소스코드를 평가, 실행 2가지 단계로 나누어 처리한다
- 소스코드 평가 과정:
    - 실행 컨텍스트 생성
    - 변수,함수 등의 선언문 실행 후 실행 컨텍스트의 스코프에 미리  등록
- 소스코드 실행 과정(런타임)
    - 평가 과정 이후 실행
    - 소스코드 실행에 필요한 정보를 실행 컨텍스트의 스코프에서 찾아옴
    - 실행 결과는 다시 실행 컨텍스트가 관리하는 스코프에 등록됨

### 23.3 실행 컨텍스트의 역할

전역 코드 평가 → 전역 코드 실행 → 함수 코드 평가 → 함수 코드 실행 → …

- 함수 호출이 종료되면 호출 이전으로 들어가 실행 중인 코드, 이전에 실행하던 코드 등을 구분하여 관리해야 함
- 스코프, 식별자, 코드 실행 순서 등을 관리해야 하는데 이것을 제공해 주는 것이 실행 컨텍스트
- 식별자, 스코프는 **렉시컬** 환경에서 관리
- 코드 실행은 **스택**으로 관리

### 23.4 실행 컨텍스트 스택

<img src="./23장 실행 컨텍스트/Untitled 1.png" >

- 42장에 정리해 둠. . .

### 23.5 렉시컬 환경

렉시컬 환경: 식별자, 식별자에 바인딩된 값, 상위 스코프에 대한 참조를 기록

### 23.6 실행 컨텍스트의 생성과 식별자 검색 과정

1. **전역 객체 생성**
- 전역 코드가 평가되기 이전에 생성
1. **전역 코드 평가**
- 소스코드가 로드되고 나면, 자바스크립트 엔진이 전역 코드를 평가함
- 전역 실행 컨텍스트 생성 → 전역 렉시컬 환경 생성 → 전역 환경 레코드 생성 → this 바인딩, 외부 렉시컬 환경에 대한 참조 결정
- 책에 매우 자세히 나와 있음…

### 23.7 실행 컨텍스트와 블록 레벨 스코프

- var 키워드: 함수 레벨 스코프
- let, const 키워드: 블록 레벨 스코프